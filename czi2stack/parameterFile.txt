(FixedInternalImagePixelType "float")
(MovingInternalImagePixelType "float")

// (UseDirectionCosines "true")

(Registration "MultiResolutionRegistration")
(Interpolator "BSplineInterpolator")
(ResampleInterpolator "FinalBSplineInterpolator")
(Resampler "DefaultResampler")

(FixedImagePyramid "FixedSmoothingImagePyramid")
(MovingImagePyramid "MovingSmoothingImagePyramid")

(Optimizer "AdaptiveStochasticGradientDescent")
// (Optimizer "RegularStepGradientDescent")

(Transform "EulerTransform")
// (Metric "AdvancedMattesMutualInformation")
// (Metric "AdvancedNormalizedCorrelation")
(Metric "AdvancedMeanSquares")

(AutomaticScalesEstimation "true")

(AutomaticTransformInitialization "true")
// (AutomaticTransformInitializationMethod "GeometricalCenter")
(AutomaticTransformInitializationMethod "CenterOfGravity")
// (AutomaticTransformInitializationMethod "Origins")


(NumberOfResolutions 4)
(ImagePyramidSchedule  256 256  128 128  64 64  32 32)


(MaximumNumberOfIterations 1000 500 300 200)
(MaximumStepLength 100 5 3 2)
(MinimumStepLength 0.1 0.005 0.001 0.0001)
(MinimumGradientMagnitude 0.00001 0.00001 0.0001)
(RelaxationFactor 0.99)

(NumberOfSpatialSamples 4000)
// (NewSamplesEveryIteration "true")
(ImageSampler "Random")
// (ImageSampler "RandomSparseMask")
// (ImageSampler "RandomCoordinate")
// (UseRandomSampleRegion "true")
// (SampleRegionSize 50 50)
// (ImageSampler "Full")
// (ImageSampler "Grid") // can be very slow probably due to many samples
// (SampleGridSpacing  2 2  4 4  8 8  16 16) // low res should have low spacing

(BSplineInterpolationOrder 1)
(FinalBSplineInterpolationOrder 3)

(DefaultPixelValue 0)

